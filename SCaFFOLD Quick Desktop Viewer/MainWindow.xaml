<Window x:Class="SCaFFOLD_Quick_Desktop_Viewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SCaFFOLD_Quick_Desktop_Viewer"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="1000">

    <Window.Resources>
        <DataTemplate x:Key="Formulae">
            <local:FormulaeDisplay DataContext="{Binding}"/>
        </DataTemplate>
        <DataTemplate x:Key="Points">
            <Path Fill="Red">
                <Path.Data>
                    <EllipseGeometry
                        Center="{Binding XY, Mode=TwoWay}"
                        RadiusX="10"
                        RadiusY="10"
                        />
                </Path.Data>
            </Path>
        </DataTemplate>
        <DataTemplate x:Key="Lines">
            <Path Stroke="DarkBlue" StrokeThickness="3">
                <Path.Data>
                    <LineGeometry StartPoint="{Binding LineStart}" EndPoint="{Binding LineEnd}" />
                </Path.Data>
            </Path>
        </DataTemplate>
    </Window.Resources>

    <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" x:Name="IODisplay"/>
            <ColumnDefinition Width="10"/>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"/>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="15"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid Grid.Row="1" Margin="15 0 0 0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                    <RowDefinition Height="10"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <GridSplitter Grid.Row="2" Height="5" HorizontalAlignment="Stretch"/>
                <StackPanel Orientation="Horizontal">
                    <StackPanel>
                        <TextBlock Text="{Binding CalcTypeName}" Width="250"/>
                        <TextBox Text="{Binding CalcInstanceName}" Width="250"/>
                    </StackPanel>
                </StackPanel>
                <ScrollViewer Grid.Row="1">
                    <StackPanel>
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="INPUTS"/>
                        <local:CalcInputs Grid.Row="1" Grid.Column="0" />
                    </StackPanel>
                </ScrollViewer>

                <ItemsControl Name ="Interactive" Grid.Row="3" ItemsSource="{Binding InteractivePoints}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas Name="InteractiveImageCanvas"
                                Background="AliceBlue"
                                Width="300"
                                Height="350"
                                Grid.Row="3"
                                MouseDown="LeftButtonDown"
                                MouseUp="LeftButtonUp"
                                MouseMove="MouseOnTheMove"
                                MouseLeave="MouseLeavesCanvas"
                                />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate >
                            <ContentControl Content="{Binding}">
                                <ContentControl.Style>
                                    <Style TargetType="{x:Type ContentControl}">
                                        <Setter Property="ContentTemplate" Value="{StaticResource Points}"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding GraphicType}" Value="LINE">
                                                <Setter Property="ContentTemplate" Value="{StaticResource Lines}"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ContentControl.Style>
                            </ContentControl>





                        </DataTemplate>
                    </ItemsControl.ItemTemplate>

                </ItemsControl>
            </Grid>
        </Grid>
        <ContentControl Grid.Column="2" Content="{Binding}" ContentTemplate="{StaticResource Formulae}" />
    </Grid>
</Window>
